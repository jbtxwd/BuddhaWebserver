'use strict';

/*
const receipt = {
    data: {
        "orderId":"GPA.3377-6104-1448-90157",
        "packageName":"com.sidequest.notification",
        "productId":"test_gem_tier1",
        "purchaseTime":1537236193610,
        "purchaseState":0,
        "developerPayload":{
            "developerPayload":"",
            "is_free_trial":false,
            "has_introductory_price_trial":false,
            "is_updated":false
        },
        "purchaseToken":"hicmjhfpdjgmhapmmdgcmjbj.AO-J1OxsQ2TnFzdvJKxa2-zCwQCsoGpBd8iBs8VCvJTDwqglvcwD3ZA5qWk6E_OKRfU_cRVfJ3i7jaq_C0IQPHIdQNfy-SJskBVEs7mJid92cMvVrCrzrZGkrY4v_7zM3M7cSlM0at1i"
    },
    signature: 'hRVsTI0roYJkgC/8ga8SBRGdXXBahfea3bTNiOMyvAJrcL/qBhOWaxjeZH/XJvs2/U+JksJad/CrPx3m9nJnuH2f8E/g6dad4JZFsp9744psJXxEiEkcgnNNchnR/S4c6ZtOaBUE7v6ButlT+jQ7LBsQiERxMrkGeEp2DUtT+j198m4Gy1lEW27vBLL5KucI1/Fabe1MD19aYBKt4XNl1dGO//rr2q7X9i3uRoVAXOYbzKusmNGxtYDRfRK/S68WdgtDxjzflU9Cpnt0SN12q5E7fDZm2jNRTI2m2yWK98PKgETELp2N0yHgpyX7GUjQsYSzTX/AXGmb/pH1LBv8Cg=='
};
*/
const receipt = { packageName: 'com.sidequest.notification', productId: 'test_gem_tier1', purchaseToken: 'hmabjnmoimjgnfffpdocieoj.AO-J1Ozlut4XJcbpdpGCczMZGN2dgjlqSDNRQCWPlkTdkQ_dNG9hXtOVY8ns1YkmgIFp9s9JicvQkzU5ASU-VaiFW7VftYepkBhzZ_zWJksUkayb9BOeXxXly-xmnaI6QB2MxnYBsGKH', subscription: false };

const pubKey = 'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAioyGXYYCkZAnD8q22lq4+7ID2E1DiyI2b5O08u2NZuIng5u63WZhmMZyGqCCb08K9YNAT6PH1lyUJRMkp9TlTPi7CTd336xHJlxR6h/XhcXDXdoeoag/UR/Dd5pJ44nGvIrT5/8EXPN3AF2QrVcsMt+ymvzJFmZ38mKdkWNDObEcj1dNucNEnyKsG+HhjCXJfx1plGC0GTu1u3hBwJY62CPUNFnTUEGp54aTFMn3/BeqiYBowKelaQXlx1ZmqIGSSqoPJg9rnBhcCucDrwSQjudRrsjUOVCA1czJ2TJ3TS0PH1zSflYpWakz0tskimj5/Pysi4oyQM9KjjsMrgS4dQIDAQAB';

const iap = require('./index');

iap.config({
	verbose: true,
	googlePublicKeyStrLive: pubKey,
    /*
    googleServiceAccount: {
        clientEmail: 'testiap@testiap-216809.iam.gserviceaccount.com',
        privateKey: '-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCuP0JzGwZYfEjs\nB0hlCjeHRdCnhysjQEgD94kEuOCq2pQWnL50+Ugph1ZluG/HWQ5i4dPoVxc3ljZw\nyZWgZksZ98kDUEPeFEwkJ+raHWwCN4aPXdfO1h/mr/4USxWXPWmAso03Sb8xk1Fj\nueS/aMvkPXpfsBNkoPTbmpoPW+DCWiov2Y+9rAG1kNmMj61rT3UZcsIk6aVddH8N\nyLHLgDsiO+KKOuvSid2acLJrxj4NugRI5WOizRXZvc/3oPM8ylLVDWwbh+i95FJP\nSBABwNjyjmPUWjD8pFvEk0tuGJ5OEQoxRxwNiSisyJzHP4GrMCNEHYzaq95QIW4a\noyxBQvElAgMBAAECggEAGODw3qjw5MDoE4UtrbmB+Kc79bN7sgaLUb+t2VYBQ/u9\n8aWTHvX5uu43JIJrOUoKnw0x2aZXqwjgQIXTvolkdzJ1CatT6Vk6Dt6BLn/NbFqb\ntIwYVFCn0OL3ctPOox+yWN0FgyudKBmp4QSJd9fhZrbtakykVDWUCGfgT8mVQ4Jq\nTWXMm9JpgBB+yNoOFhVKSusjIthbRLYj7POFsi4f+ostDQxOe2uto68qgZTka/hg\ng02bf4QeWb18LlQrsXT+cGnrghczZc7MKvJHP54UIR09jFD0fvSX+rt9YxBZLpIk\ncGa/Hmqi33oNYSXD9Yl4Vkx5C0lk0Ne3/lakf3RO8QKBgQDcsbZ43U0PqKkLEvhf\nQFVgyYdeltbNgweIzZLhk15M8fi0US04zBECqa5NNvC5J5+0DdNvotirRXUxcDCE\nF7ViPojbl7jgv/mj4ZKHTYo3zP90PF4wfpu8/u11cmSMES66uqzPhOGwXHN5Fb/P\nWKjp21ad3PjIfsED+GwwosqpdQKBgQDKH1uT3Dt66WozfJIWohzZOBJYiW4BXGo/\n6vZwtlCO/zmYfZ4jM9P6UUrMp9hRAqun3KAbNv1tgOzasgbWM2DZRHQAR9/Q4oTK\n0ek1dHrQTrPDRzxca1FqgGsEzIYtcrIzROooY4kS2hIg+PnGIqOgM4yvUh2kxefX\n7a7MAzyC8QKBgBizTy/x3Nke0GSr596JTcT6aUs96KaxvpsiHwlePBSylFpiJ4SO\n2myI3zhHKOQgOjClx39cI5HvwTEaVGPEX4myZBDnx0poUiF0crjwBcM/D2xMAWK+\nGOIrShp2BijjF27Qy9yiC7x4bHgl5gTn8GfUI7qha7rM7P9rw3giEDqtAoGBAL1s\nE9wHeqrfE4t7BEI33YdpODBHY5Pc8ypB3oGVKvxIjsate0WMbe3av5n69ww8z3h6\nmIXIzEsSl2cBjsyxy+LydzBIK6ZMk5ysir1xEyQjje7F1PjcDqob/a+6qUjwg7bu\nr+/4EF9dhb3m99ZLYkNh7EfmUie43WWMt9M0eUJRAoGAfzYsNvRGSbqQ34e0rW/Q\n+3N6ggdrZkjPg1Va6knfEhVsB2trkS04Y4LZcPmMb9twzmpjqnLQO+ngwvrdRets\nvVXRugExkgRkQ6GX3Eu3od196LIjhjN/gyPcSn4doMGHxMYSQet51vS0h2jleUXK\n/Xk2tRruXhhaVI68eI2c+0s=\n-----END PRIVATE KEY-----'
    }
    */
});

var keyData = {
    clientEmail: 'testiap@testiap-216809.iam.gserviceaccount.com',
    privateKey: '-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCuP0JzGwZYfEjs\nB0hlCjeHRdCnhysjQEgD94kEuOCq2pQWnL50+Ugph1ZluG/HWQ5i4dPoVxc3ljZw\nyZWgZksZ98kDUEPeFEwkJ+raHWwCN4aPXdfO1h/mr/4USxWXPWmAso03Sb8xk1Fj\nueS/aMvkPXpfsBNkoPTbmpoPW+DCWiov2Y+9rAG1kNmMj61rT3UZcsIk6aVddH8N\nyLHLgDsiO+KKOuvSid2acLJrxj4NugRI5WOizRXZvc/3oPM8ylLVDWwbh+i95FJP\nSBABwNjyjmPUWjD8pFvEk0tuGJ5OEQoxRxwNiSisyJzHP4GrMCNEHYzaq95QIW4a\noyxBQvElAgMBAAECggEAGODw3qjw5MDoE4UtrbmB+Kc79bN7sgaLUb+t2VYBQ/u9\n8aWTHvX5uu43JIJrOUoKnw0x2aZXqwjgQIXTvolkdzJ1CatT6Vk6Dt6BLn/NbFqb\ntIwYVFCn0OL3ctPOox+yWN0FgyudKBmp4QSJd9fhZrbtakykVDWUCGfgT8mVQ4Jq\nTWXMm9JpgBB+yNoOFhVKSusjIthbRLYj7POFsi4f+ostDQxOe2uto68qgZTka/hg\ng02bf4QeWb18LlQrsXT+cGnrghczZc7MKvJHP54UIR09jFD0fvSX+rt9YxBZLpIk\ncGa/Hmqi33oNYSXD9Yl4Vkx5C0lk0Ne3/lakf3RO8QKBgQDcsbZ43U0PqKkLEvhf\nQFVgyYdeltbNgweIzZLhk15M8fi0US04zBECqa5NNvC5J5+0DdNvotirRXUxcDCE\nF7ViPojbl7jgv/mj4ZKHTYo3zP90PF4wfpu8/u11cmSMES66uqzPhOGwXHN5Fb/P\nWKjp21ad3PjIfsED+GwwosqpdQKBgQDKH1uT3Dt66WozfJIWohzZOBJYiW4BXGo/\n6vZwtlCO/zmYfZ4jM9P6UUrMp9hRAqun3KAbNv1tgOzasgbWM2DZRHQAR9/Q4oTK\n0ek1dHrQTrPDRzxca1FqgGsEzIYtcrIzROooY4kS2hIg+PnGIqOgM4yvUh2kxefX\n7a7MAzyC8QKBgBizTy/x3Nke0GSr596JTcT6aUs96KaxvpsiHwlePBSylFpiJ4SO\n2myI3zhHKOQgOjClx39cI5HvwTEaVGPEX4myZBDnx0poUiF0crjwBcM/D2xMAWK+\nGOIrShp2BijjF27Qy9yiC7x4bHgl5gTn8GfUI7qha7rM7P9rw3giEDqtAoGBAL1s\nE9wHeqrfE4t7BEI33YdpODBHY5Pc8ypB3oGVKvxIjsate0WMbe3av5n69ww8z3h6\nmIXIzEsSl2cBjsyxy+LydzBIK6ZMk5ysir1xEyQjje7F1PjcDqob/a+6qUjwg7bu\nr+/4EF9dhb3m99ZLYkNh7EfmUie43WWMt9M0eUJRAoGAfzYsNvRGSbqQ34e0rW/Q\n+3N6ggdrZkjPg1Va6knfEhVsB2trkS04Y4LZcPmMb9twzmpjqnLQO+ngwvrdRets\nvVXRugExkgRkQ6GX3Eu3od196LIjhjN/gyPcSn4doMGHxMYSQet51vS0h2jleUXK\n/Xk2tRruXhhaVI68eI2c+0s=\n-----END PRIVATE KEY-----'
};
iap.setup(() => {
	iap.validateOnce(receipt, keyData, (error, response) => {
		console.log('error >', error, 'response >', response);
	});
});

